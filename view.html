<!DOCTYPE html>
<html lang="fr" >
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
	<title></title>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<script src="table.js"></script>
</head>
<body>
	<h4 id="return" onclick="window.open('index.html', '_self');">Home</h4>
	<iframe src="" allowfullscreen allow="autoplay"></iframe>
	<section id="section"></section>
</body>
<script type="text/javascript">

label = document.location.href.split("|")[1];
link = document.location.href.split("?")[1];

if (label == undefined || link == undefined) {
	window.open('index.html', '_self');
}

label = label.replace("%20", " ");
link = link.split("|")[0];

document.getElementsByTagName("iframe")[0].src = link;

function getNumberOfMovie()  {
	x = 0;
	while (tableLink[x]) {
		x++;
	}
	return x;
}

function getwidth() {
    x = width = 0;
    while (document.getElementsByTagName("a")[x]) {
        width = width + document.getElementsByTagName("a")[x].offsetWidth;
        x++;
    }
    return width;
}

async function wait(Ms, FuncToExe) {
	await new Promise(resolve => setTimeout(resolve, Ms));
	eval(arguments[1] + "()");
}


NumberOfMovie = getNumberOfMovie();
width = reboot = 0;
log = "/";

function complete() {
	while (width < window.innerWidth) {
		rand = Math.floor(Math.random() * NumberOfMovie);
		if (!log.includes(rand)) {
			log = log + "/" + rand;
			content = "<a class=\"" + tableLabel[rand] + "\" href=\"view.html?" + tableLink[rand] + "|" + tableLabel[rand] + "\"><img src=\"" + tablePicture[rand]  + "\" alt=\"image\"><h3>" + tableName[rand] + "</h3></a>";
			document.getElementById("section").innerHTML = document.getElementById("section").innerHTML + content;
			width = width + document.getElementById("section").lastChild.offsetWidth;
		}
	}
	delet()
}

async function delet() {
	width = getwidth();
	if (width > window.innerWidth) {
		document.getElementById("section").lastChild.remove();
		delet()
	} else {
		reboot++;
		if (reboot < 500) {
			await wait(100, "delet");
		}
	}
}

complete();
</script>
</html>
